# MindSploit é¡¹ç›®ç»“æ„æ–‡æ¡£

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
MindSploit/
â”œâ”€â”€ ğŸ“„ README.md                    # é¡¹ç›®æ¦‚è¿°å’Œå¿«é€Ÿå¼€å§‹æŒ‡å—
â”œâ”€â”€ ğŸ“„ Update_log.md                # å¼€å‘æ—¥å¿—å’Œç‰ˆæœ¬å†å²è®°å½•
â”œâ”€â”€ ğŸ“„ content.md                   # é¡¹ç›®ç»“æ„è¯´æ˜æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”œâ”€â”€ ğŸ“„ .cursor-rules.yaml           # Cursor IDE å¼€å‘è§„åˆ™é…ç½®
â”œâ”€â”€ ğŸ“„ .gitignore                   # Git ç‰ˆæœ¬æ§åˆ¶å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ MindSploit.pro               # Qt qmake é¡¹ç›®é…ç½®æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ CMakeLists.txt               # CMake æ„å»ºé…ç½®æ–‡ä»¶ï¼ˆå¤‡ç”¨ï¼‰
â”œâ”€â”€ ğŸ“ src/                         # æºä»£ç ä¸»ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ main.cpp                 # ç¨‹åºå…¥å£ç‚¹ï¼Œåˆå§‹åŒ–æ ¸å¿ƒç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ core/                    # æ¡†æ¶æ ¸å¿ƒé€»è¾‘æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ terminal_interface.h/cpp    # ç»ˆç«¯äº¤äº’ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ engine_manager.h/cpp        # å¼•æ“ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ session_manager.h/cpp       # ä¼šè¯ç®¡ç†å™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ command_parser.h/cpp        # å‘½ä»¤è§£æå™¨
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ database.h/cpp              # æ•°æ®åº“ç®¡ç†
â”‚   â”‚   â””â”€â”€ ğŸ“„ config_manager.h/cpp        # é…ç½®ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ğŸ“ engines/                 # è‡ªä¸»å¼€å‘çš„æ¸—é€æµ‹è¯•å¼•æ“
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ engine_interface.h   # å¼•æ“æ¥å£åŸºç±»
â”‚   â”‚   â””â”€â”€ ğŸ“ network/             # ç½‘ç»œæ‰«æå¼•æ“
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ network_engine.h/cpp   # ç½‘ç»œæ‰«æå¼•æ“å®ç°
â”‚   â”‚       â””â”€â”€ ğŸ“„ network_scanner.h/cpp  # ç½‘ç»œæ‰«æå™¨ï¼ˆè§„åˆ’ä¸­ï¼‰
â”‚   â”œâ”€â”€ ğŸ“ ai/                      # AIé›†æˆæ¨¡å—
â”‚   â”‚   â””â”€â”€ ğŸ“„ ai_manager.h/cpp     # AIç®¡ç†å™¨
â”‚   â””â”€â”€ ğŸ“ utils/                   # å·¥å…·ç±»å’Œè¾…åŠ©å‡½æ•°
â”‚       â””â”€â”€ ğŸ“„ network_utils.h/cpp  # ç½‘ç»œå·¥å…·ç±»
â”œâ”€â”€ ğŸ“ docs/                        # é¡¹ç›®æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ ARCHITECTURE.md          # æ¶æ„è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ API_REFERENCE.md         # APIå‚è€ƒæ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ USER_GUIDE.md            # ç”¨æˆ·ä½¿ç”¨æŒ‡å—
â”‚   â”œâ”€â”€ ğŸ“„ MODULE_DESIGN.md         # æ¨¡å—è®¾è®¡æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ AI_INTERACTION_DESIGN.md # AIäº¤äº’è®¾è®¡æ–‡æ¡£
â”‚   â””â”€â”€ ğŸ“„ COMMAND_SYSTEM_DESIGN.md # å‘½ä»¤ç³»ç»Ÿè®¾è®¡æ–‡æ¡£
â”œâ”€â”€ ğŸ“ tests/                       # æµ‹è¯•ä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ unit/                    # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ integration/             # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ performance/             # æ€§èƒ½æµ‹è¯•
â”œâ”€â”€ ğŸ“ release/                     # å‘å¸ƒç‰ˆæœ¬ç›®å½•
â”‚   â””â”€â”€ ğŸ“„ MindSploit.exe           # Windowså¯æ‰§è¡Œæ–‡ä»¶
â”œâ”€â”€ ğŸ“ debug/                       # è°ƒè¯•ç‰ˆæœ¬ç›®å½•
â””â”€â”€ ğŸ“ build/                       # æ„å»ºä¸´æ—¶æ–‡ä»¶ç›®å½•
```

## ğŸ—ï¸ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### ğŸ“„ main.cpp
- **ä½œç”¨**: ç¨‹åºå…¥å£ç‚¹ï¼Œè´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰æ ¸å¿ƒç»„ä»¶
- **åŠŸèƒ½**:
  - åˆå§‹åŒ–æ•°æ®åº“è¿æ¥
  - åˆ›å»ºç»ˆç«¯ç•Œé¢
  - å¯åŠ¨ä¸»ç¨‹åºå¾ªç¯
  - å¤„ç†ç¨‹åºé€€å‡ºæ¸…ç†

### ğŸ§  core/ æ ¸å¿ƒæ¨¡å—

#### terminal_interface.h/cpp
- **ä½œç”¨**: ä¸“ä¸šå‘½ä»¤è¡Œäº¤äº’ç•Œé¢ï¼Œç±»ä¼¼Metasploitçš„msfconsole
- **åŠŸèƒ½**:
  - å‘½ä»¤è¡Œæç¤ºç¬¦å’Œè¾“å…¥å¤„ç†
  - å½©è‰²è¾“å‡ºæ”¯æŒï¼ˆæˆåŠŸ/é”™è¯¯/è­¦å‘Š/ä¿¡æ¯ï¼‰
  - å‘½ä»¤å†å²è®°å½•å’Œè‡ªåŠ¨è¡¥å…¨
  - ä¿¡å·å¤„ç†ï¼ˆCtrl+Cä¼˜é›…ä¸­æ–­ï¼‰
  - ä¼šè¯çŠ¶æ€æ˜¾ç¤º

#### engine_manager.h/cpp
- **ä½œç”¨**: å¼•æ“ç®¡ç†å™¨ï¼Œè´Ÿè´£æ‰€æœ‰æ¸—é€æµ‹è¯•å¼•æ“çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **åŠŸèƒ½**:
  - å¼•æ“æ³¨å†Œå’Œå‘ç°
  - å¼•æ“åŠ è½½å’Œå¸è½½
  - å‘½ä»¤è·¯ç”±å’Œæ‰§è¡Œè°ƒåº¦
  - å¼•æ“çŠ¶æ€ç›‘æ§

#### session_manager.h/cpp
- **ä½œç”¨**: ä¼šè¯ç®¡ç†å™¨ï¼Œå¤„ç†ç”¨æˆ·ä¼šè¯å’ŒçŠ¶æ€ç»´æŠ¤
- **åŠŸèƒ½**:
  - å¤šä¼šè¯æ”¯æŒ
  - ä¼šè¯å˜é‡ç®¡ç†
  - ä¸Šä¸‹æ–‡çŠ¶æ€ä¿å­˜
  - ä¼šè¯åˆ‡æ¢å’Œæ¢å¤

#### command_parser.h/cpp
- **ä½œç”¨**: æ™ºèƒ½å‘½ä»¤è§£æå™¨ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥çš„å‘½ä»¤
- **åŠŸèƒ½**:
  - å‘½ä»¤è¯­æ³•è§£æ
  - å‚æ•°éªŒè¯å’Œç±»å‹è½¬æ¢
  - å‘½ä»¤è¡¥å…¨å’Œæç¤º
  - åˆ«åå’Œå®æ”¯æŒ

#### database.h/cpp
- **ä½œç”¨**: æ•°æ®åº“ç®¡ç†ï¼Œè´Ÿè´£æ•°æ®æŒä¹…åŒ–å­˜å‚¨
- **åŠŸèƒ½**:
  - MySQLæ•°æ®åº“è¿æ¥ç®¡ç†
  - å‘½ä»¤å†å²è®°å½•å­˜å‚¨
  - æ‰«æç»“æœæ•°æ®å­˜å‚¨
  - AIå¯¹è¯è®°å½•å­˜å‚¨
  - æ— æ•°æ®åº“æ¨¡å¼æ”¯æŒ

#### config_manager.h/cpp
- **ä½œç”¨**: é…ç½®ç®¡ç†å™¨ï¼Œå¤„ç†ç”¨æˆ·è®¾ç½®å’Œç³»ç»Ÿé…ç½®
- **åŠŸèƒ½**:
  - ç”¨æˆ·åå¥½è®¾ç½®
  - APIå¯†é’¥ç®¡ç†
  - å¼•æ“é…ç½®å‚æ•°
  - é…ç½®æ–‡ä»¶è¯»å†™

### ğŸ”§ engines/ å¼•æ“æ¨¡å—

#### engine_interface.h
- **ä½œç”¨**: å¼•æ“æ¥å£åŸºç±»ï¼Œå®šä¹‰æ‰€æœ‰å¼•æ“çš„ç»Ÿä¸€æ¥å£è§„èŒƒ
- **åŠŸèƒ½**:
  - æ ‡å‡†åŒ–å¼•æ“ç”Ÿå‘½å‘¨æœŸ
  - ç»Ÿä¸€å‚æ•°é…ç½®æ¥å£
  - æ‰§è¡Œæ§åˆ¶å’ŒçŠ¶æ€ç®¡ç†
  - ç»“æœå¤„ç†å’ŒæŠ¥å‘Š

#### network/network_engine.h/cpp
- **ä½œç”¨**: ç½‘ç»œæ‰«æå¼•æ“ï¼Œè‡ªä¸»å¼€å‘çš„ç½‘ç»œæ¢æµ‹å·¥å…·
- **åŠŸèƒ½**:
  - ä¸»æœºå‘ç°ï¼ˆdiscoverå‘½ä»¤ï¼‰
  - ç«¯å£æ‰«æï¼ˆscanå‘½ä»¤ï¼‰
  - æœåŠ¡è¯†åˆ«ï¼ˆserviceå‘½ä»¤ï¼‰
  - æ“ä½œç³»ç»Ÿè¯†åˆ«ï¼ˆoså‘½ä»¤ï¼‰
  - å¤šçº¿ç¨‹å¹¶å‘æ‰«æ

### ğŸ¤– ai/ AIé›†æˆæ¨¡å—

#### ai_manager.h/cpp
- **ä½œç”¨**: AIç®¡ç†å™¨ï¼Œå¤„ç†ä¸AIæ¨¡å‹çš„äº¤äº’
- **åŠŸèƒ½**:
  - å¤šAIæ¨¡å‹æ”¯æŒï¼ˆæœ¬åœ°/äº‘ç«¯ï¼‰
  - æ™ºèƒ½åˆ†æå’Œå»ºè®®
  - è‡ªç„¶è¯­è¨€å‘½ä»¤è§£æ
  - è‡ªåŠ¨åŒ–æ”»å‡»è·¯å¾„è§„åˆ’

### ğŸ› ï¸ utils/ å·¥å…·æ¨¡å—

#### network_utils.h/cpp
- **ä½œç”¨**: ç½‘ç»œå·¥å…·ç±»ï¼Œæä¾›åº•å±‚ç½‘ç»œæ“ä½œæ”¯æŒ
- **åŠŸèƒ½**:
  - IPåœ°å€è§£æå’ŒéªŒè¯
  - TCP/UDPè¿æ¥æµ‹è¯•
  - ICMP pingå®ç°
  - ç«¯å£èŒƒå›´è§£æ
  - ç½‘ç»œæ¥å£æšä¸¾
  - è·¨å¹³å°ç½‘ç»œæ”¯æŒ

## ğŸ“Š æ¨¡å—ä¾èµ–å…³ç³»å›¾

```mermaid
graph TD
    A[main.cpp] --> B[TerminalInterface]
    A --> C[EngineManager]
    A --> D[Database]

    B --> E[CommandParser]
    B --> F[SessionManager]
    B --> G[ConfigManager]

    C --> H[EngineInterface]
    C --> I[NetworkEngine]

    I --> J[NetworkUtils]

    E --> K[AIManager]

    D --> L[MySQLæ•°æ®åº“]

    subgraph "Core Layer"
        B
        C
        D
        E
        F
        G
    end

    subgraph "Engine Layer"
        H
        I
    end

    subgraph "Utils Layer"
        J
    end

    subgraph "AI Layer"
        K
    end

    subgraph "Data Layer"
        L
    end

    style A fill:#ff9999
    style B fill:#99ccff
    style C fill:#99ccff
    style D fill:#99ccff
    style I fill:#99ff99
    style J fill:#ffcc99
    style K fill:#ff99ff
    style L fill:#cccccc
```

## ğŸ”„ æ•°æ®æµå›¾

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant T as TerminalInterface
    participant P as CommandParser
    participant M as EngineManager
    participant N as NetworkEngine
    participant NU as NetworkUtils
    participant D as Database

    U->>T: è¾“å…¥å‘½ä»¤ "scan 127.0.0.1 ports=80,443"
    T->>P: è§£æå‘½ä»¤
    P->>M: è·¯ç”±åˆ°ç½‘ç»œå¼•æ“
    M->>N: æ‰§è¡Œæ‰«æå‘½ä»¤
    N->>NU: è°ƒç”¨ç½‘ç»œå·¥å…·
    NU-->>N: è¿”å›æ‰«æç»“æœ
    N->>D: å­˜å‚¨æ‰«æç»“æœ
    N-->>M: è¿”å›æ‰§è¡Œç»“æœ
    M-->>T: è¿”å›æ ¼å¼åŒ–ç»“æœ
    T-->>U: æ˜¾ç¤ºæ‰«æç»“æœ
```

## ğŸ›ï¸ æ¶æ„å±‚æ¬¡è¯´æ˜

### 1. **è¡¨ç¤ºå±‚ (Presentation Layer)**
- **TerminalInterface**: ç”¨æˆ·äº¤äº’ç•Œé¢
- **å‘½ä»¤è§£æå’ŒéªŒè¯**
- **ç»“æœæ ¼å¼åŒ–å’Œæ˜¾ç¤º**

### 2. **ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)**
- **EngineManager**: å¼•æ“ç®¡ç†å’Œè°ƒåº¦
- **SessionManager**: ä¼šè¯çŠ¶æ€ç®¡ç†
- **CommandParser**: å‘½ä»¤è§£æå’Œè·¯ç”±

### 3. **å¼•æ“å±‚ (Engine Layer)**
- **NetworkEngine**: ç½‘ç»œæ‰«æå¼•æ“
- **AIManager**: AIé›†æˆå¼•æ“
- **æ‰©å±•å¼•æ“æ¥å£**

### 4. **å·¥å…·å±‚ (Utility Layer)**
- **NetworkUtils**: ç½‘ç»œå·¥å…·ç±»
- **ConfigManager**: é…ç½®ç®¡ç†
- **é€šç”¨å·¥å…·å‡½æ•°**

### 5. **æ•°æ®å±‚ (Data Layer)**
- **Database**: æ•°æ®æŒä¹…åŒ–
- **æ–‡ä»¶ç³»ç»Ÿæ“ä½œ**
- **é…ç½®æ–‡ä»¶ç®¡ç†**

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°å¼•æ“çš„æ­¥éª¤ï¼š
1. ç»§æ‰¿ `EngineInterface` åŸºç±»
2. å®ç°å¿…è¦çš„è™šå‡½æ•°
3. åœ¨ `EngineManager` ä¸­æ³¨å†Œå¼•æ“
4. åœ¨ `CommandParser` ä¸­å®šä¹‰ç›¸å…³å‘½ä»¤
5. ç¼–å†™å•å…ƒæµ‹è¯•

### æ·»åŠ æ–°å‘½ä»¤çš„æ­¥éª¤ï¼š
1. åœ¨ `CommandParser::defineBuiltinCommands()` ä¸­å®šä¹‰å‘½ä»¤
2. åœ¨å¯¹åº”å¼•æ“ä¸­å®ç°å‘½ä»¤é€»è¾‘
3. æ›´æ–°å¸®åŠ©æ–‡æ¡£
4. æ·»åŠ å‘½ä»¤æµ‹è¯•ç”¨ä¾‹

### ä»£ç è§„èŒƒï¼š
- ä½¿ç”¨ç°ä»£C++17ç‰¹æ€§
- RAIIèµ„æºç®¡ç†
- æ™ºèƒ½æŒ‡é’ˆä¼˜å…ˆ
- å¼‚å¸¸å®‰å…¨ä¿è¯
- è·¨å¹³å°å…¼å®¹æ€§è€ƒè™‘